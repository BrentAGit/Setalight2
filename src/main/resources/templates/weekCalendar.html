<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <link rel="icon" href="/img/icon.png" type="image/gif" sizes="16x16">
    <meta charset="UTF-8">
    <title>weekCalendar</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" href="/css/style.css">
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-11">
            //extra data
        </div>
        <div class="col-1" id="today"></div>
    </div>
    <div class="row week-calender">
        <div class="col-12">
            <div class="row">
                <div class="col">
                    <p>week of month</p>
                </div>
                <div class="col">
                    <p>Maa</p>
                </div>
                <div class="col">
                    <p>Din</p>
                </div>
                <div class="col">
                    <p>Woe</p>
                </div>
                <div class="col">
                    <p>Don</p>
                </div>
                <div class="col">
                    <p>Vrij</p>
                </div>
                <div class="col">
                    <p>Zat</p>
                </div>
                <div class="col">
                    <p>Zon</p>
                </div>

            </div>
            <div class="row 9">
                <div class="col">
                    <p>9:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 10">
                <div class="col">
                    <p>10:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 11">
                <div class="col">
                    <p>11:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 12">
                <div class="col">
                    <p>12:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 13">
                <div class="col">
                    <p>13:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 14">
                <div class="col">
                    <p>14:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 15">
                <div class="col">
                    <p>15:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 16">
                <div class="col">
                    <p>16:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 17">
                <div class="col">
                    <p>17:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 18">
                <div class="col">
                    <p>18:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 19">
                <div class="col">
                    <p>19:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 20">
                <div class="col">
                    <p>20:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 21">
                <div class="col">
                    <p>21:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 22">
                <div class="col">
                    <p>22:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 23">
                <div class="col">
                    <p>23:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
            <div class="row 24">
                <div class="col">
                    <p>24:00</p>
                </div>
                <div class="col maa"></div>
                <div class="col din"></div>
                <div class="col woe"></div>
                <div class="col don"></div>
                <div class="col vrij"></div>
                <div class="col zat"></div>
                <div class="col zon"></div>
            </div>
        </div>
    </div>
</div>
<script th:inline="javascript">
    /*<![CDATA[*/
    let events = /*[[${events}]]*/ 'default';
    let givenDay = /*[[${day}]]*/ 'default';
    /*]]>*/
    let today = new Date();
    today.setDate(parseInt(givenDay));
    let date = today.getDate() + '/' + (today.getMonth() + 1) + '/' + today.getFullYear()
    console.log(today);
    console.log(today.getDay())//day of week
    console.log(date);
    window.addEventListener("DOMContentLoaded", () => {
        let todayHTML = document.getElementById("today");
        todayHTML.innerHTML = date;
        for (let i = 1; i <= 7; i++) {
            let dayDate = new Date();
            if (i < today.getDay()) {
                dayDate.setDate(today.getDate() - (today.getDay() - i));
                addEvents(dayDate);
            } else if (i === today.getDay()) {
                dayDate = today;
                addEvents(dayDate);
            } else if (i > today.getDay()) {
                dayDate.setDate(today.getDate() + (i - today.getDay()));
                addEvents(dayDate);
            }
        }
    })

    const getCurrentDay = function (day) {
        switch (day) {
            case 1:
                return "maa";
            case 2:
                return "din";
            case 3:
                return "woe";
            case 4:
                return "don";
            case 5:
                return "vrij";
            case 6:
                return "zat";
            case 7:
                return "zon";
        }
    }

    const addEvents = function (dayDate) {
        let month;
        if (dayDate.getMonth() < 10) {
            month = "0" + (dayDate.getMonth() + 1)
        } else month = (dayDate.getMonth() + 1);
        let eventDate = dayDate.getFullYear() + "-" + (month) + "-" + dayDate.getDate();
        let event;
        for (let obj of events) {
            if (obj.date.split("T")[0] === eventDate) {
                event = obj;
            }
        }
        if (event !== undefined) {
            console.log(event);
            let day = document.getElementsByClassName("row " + event.startTime.split(":")[0]).item(0);
            for (let child of day.children) {
                if (child.className === "col " + getCurrentDay(dayDate.getDay())) {
                    console.log(child);
                    child.innerHTML = event.name;
                }
            }
            day = document.getElementsByClassName("row " + event.endTime.split(":")[0]).item(0);
            for (let child of day.children) {
                if (child.className === "col " + getCurrentDay(dayDate.getDay())) {
                    console.log(child);
                    child.innerHTML = event.name;
                }
            }
        }
    }
</script>
</body>
</html>